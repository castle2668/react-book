---
sidebar_position: 6
---

# Introducing useCallback

## ⚓ useCallback Hook

> Avoid unnecessary re-rendering "when Props is Object type"

useCallback 允許我們儲存跨組件執行的「函式」，它會把函式儲存在 React 內存記憶體，讓使用時的物件位址都是指向同一個地方。
useCallback 與 useEffect 都一樣要傳入 dependency array，要放入我們在函式中使用到的（相關於組件的）任何東西。

這時候剛才的 React.memo 就能夠知道傳入的函式是相同的物件。

```jsx
// 用到 setState 可以不用放入 dependency（因為它其實也不會變化）
const toggleParagraphHandler = useCallback(() => {
  setShowParagraph((prevShowParagraph) => !prevShowParagraph);
}, []);
```

如果函式有使用到一些變數，因為有 Closure 關住原本的狀態，所以就算外部更改了變數，此時 useCallback 包住的函式的變數的值，依然還是傳入時的值。

這時就得把那個變數加到 dependency，讓 `allowToggle` 如果一更改，就重新生成 `toggleParagraphHandler` Function。

```jsx
const toggleParagraphHandler = useCallback(() => {
  if (allowToggle) {
    setShowParagraph((prevShowParagraph) => !prevShowParagraph);
  }
}, [allowToggle]);
```

## 回顧

看完這篇文章，我們到底有什麼收穫呢？藉由本文可以理解到…

- React

## References

- [React - The Complete Guide (incl Hooks, React Router, Redux)](https://www.udemy.com/course/react-the-complete-guide-incl-redux/)
