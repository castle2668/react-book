---
sidebar_position: 2
---

# Working with State

## âš“ useState Hook

> ğŸ’¡ å–®å‘ç¶å®š
> ğŸ’¡ é™¤é DOM ç§»é™¤ï¼Œå¦å‰‡ useState ç®¡ç†çš„ state éƒ½ä¸æœƒé‡æ–°åˆå§‹åŒ–ï¼Œåªæœƒåœ¨ç¬¬ä¸€æ¬¡è¼‰å…¥æ™‚åˆå§‹åŒ–ã€‚

é€²è¡Œ setState æ™‚ä¸¦ä¸æœƒé¦¬ä¸Šæ›´æ”¹ç‹€æ…‹ï¼Œè€Œæ˜¯æœƒé€²å…¥æ’ç¨‹ï¼Œå„ªå…ˆå®Œæˆæ›´é‡è¦çš„å·¥ä½œï¼Œä¸é React é‚„æ˜¯æœƒç¢ºä¿æˆ‘å€‘æ”¹è®Š State çš„é †åºæ˜¯æ­£ç¢ºçš„ã€‚
ä½†æ˜¯æœƒç™¼ç”Ÿä»¥ä¸‹å•é¡Œï¼Œå¦‚æœæ’ç¨‹äº†å¤šå€‹ setStateï¼Œå‰‡æœƒåˆ°æœ€å¾Œæ‰æŒ‰ç…§æ’ç¨‹é †åºåŸ·è¡Œç‹€æ…‹æ”¹è®Šï¼Œçµæœå°±æœƒæ˜¯ Bookã€‚

```jsx
const [state, setState] = useState('DVD');

setState('Pencil');
setState('Book'); // æœ€å¾Œçš„ç‹€æ…‹æœƒè®Šæˆ Book
```

ä½†æœ‰æ™‚å€™æˆ‘å€‘éœ€è¦é¦¬ä¸Šå–å¾—æ”¹è®Šçš„çµæœå»åšä¸€äº›æ‡‰ç”¨æˆ–è¨ˆç®—ï¼Œæˆ‘å€‘å°±å¯ä»¥ç”¨å‡½å¼çš„å½¢å¼ï¼Œè®“ç‹€æ…‹æ›´æ–°å¯ä»¥ä¾è³´æ–¼ä¹‹å‰çš„ç‹€æ…‹å¿«ç…§ (snapshot)ã€‚
é€™æ¨£æˆ‘å€‘å°±èƒ½å¾—åˆ°åŸºæ–¼ç‹€æ…‹å¿«ç…§çš„æ–°ç‹€æ…‹ï¼Œè€Œä¸æ˜¯æ°¸é éƒ½åªæœƒæ‹¿åˆ°æœ€æ–°çš„é‚£ä¸€å€‹ç‹€æ…‹å“©ï¼

ğŸ‘‡ Updating State That Depends On The Previous State.
Safer way: Ensure the Latest state snapshot (If it depends on the previous state)

```jsx=
setUserInput((prevState) => {
  return { ...prevState, enteredTitle: event.target.value };
});
```

æˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨ useEffectï¼Œå®ƒè·Ÿå‡½å¼å½¢å¼ä¸€æ¨£éƒ½æœƒå»çœ‹ä¾è³´çš„ç‹€æ…‹æœ‰æ²’æœ‰æ”¹è®Šï¼Œå¦‚æœæ”¹è®Šäº†å°±æœƒé¦¬ä¸ŠåŸ·è¡Œ setStateï¼Œä¸æœƒéŒ¯éç‹€æ…‹æ”¹è®Šï¼Œèƒ½å¤ ç¢ºä¿å–å¾—æœ€æ–°çš„ç‹€æ…‹ã€‚
å› æ­¤ï¼Œåœ¨ useEffect è£¡ä½¿ç”¨çš„ setState å³ä½¿ä¸æ˜¯å‡½å¼çš„å½¢å¼ï¼Œä¹Ÿæœƒå³æ™‚æ›´æ–°ç‹€æ…‹ã€‚

## Lifting The State Up (Emit, from child to parent)

> ğŸ’¡ Parent component needs data generated in Child component.

Step 1: åœ¨ Parent å»ºç«‹ä¸€å€‹å‡½å¼ï¼Œç”¨ä¾†ä½œç‚ºä¸€å€‹è¦å‚³çµ¦ Child çš„ Props `onXxx` çš„ Value (type: Function)ã€‚

```jsx
// Inside of the "ParentComponent" component function

const xxxHandler = () => {
  // do something...
};

// Return JSX
<ChildComponent onXXX={xxxHandler} />;
```

Step 2: åœ¨ Child åŸ·è¡Œå‡½å¼ `props.onXxx`ï¼Œæ­¤æ™‚ç­‰åŒæ–¼åŸ·è¡Œäº† Parent çš„ `xxxHandler` å‡½å¼ï¼Œå› ç‚ºå®ƒå€‘å‚³éçš„æ˜¯ **Pointer (By Reference)**ã€‚

```jsx
// Inside of the "ChildComponent" component function

props.onXxx();
```

Step 3: å¾ Child æ”¾å…¥åƒæ•¸å‚³å› Parentï¼ŒParent å¾åƒæ•¸ç²å¾— Child çš„ Dataï¼Œæ­¤å³å®Œæˆ Emit çš„å‹•ä½œã€‚

```jsx
// Inside of the "ChildComponent" component function

const childData = {
  title: 'Child Title',
  data: new Date(),
};

props.onXxx(childData);
```

```jsx
// Inside of the "ChildComponent" component function

const xxxHandler = (enteredChildData) => {
  // do something...
  const childData = { ...enteredChildData };
  console.log(childData);
};

// Return JSX
<ChildComponent onXXX={xxxHandler} />;
```

## å›é¡§

çœ‹å®Œé€™ç¯‡æ–‡ç« ï¼Œæˆ‘å€‘åˆ°åº•æœ‰ä»€éº¼æ”¶ç©«å‘¢ï¼Ÿè—‰ç”±æœ¬æ–‡å¯ä»¥ç†è§£åˆ°â€¦

- React

## References

- [React - The Complete Guide (incl Hooks, React Router, Redux)](https://www.udemy.com/course/react-the-complete-guide-incl-redux/)
