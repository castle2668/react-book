---
sidebar_position: 1
---

# Working with State

## âš“ useState Hook

### åˆå§‹åŒ–

State åªæœƒåœ¨ç¬¬ä¸€æ¬¡è¼‰å…¥æ™‚åˆå§‹åŒ–ï¼Œé™¤é DOM ç§»é™¤ï¼Œå¦å‰‡ `useState` ç®¡ç†çš„ State éƒ½ä¸æœƒé‡æ–°åˆå§‹åŒ–ã€‚

### æ›´æ”¹ç‹€æ…‹

é€²è¡Œ `setState` æ™‚ä¸¦ä¸æœƒé¦¬ä¸Šæ›´æ”¹ç‹€æ…‹ï¼Œè€Œæ˜¯æœƒé€²å…¥æ’ç¨‹ï¼Œå„ªå…ˆå®Œæˆæ›´é‡è¦çš„å·¥ä½œï¼Œä¸é React é‚„æ˜¯æœƒç¢ºä¿æˆ‘å€‘æ”¹è®Š State çš„é †åºæ˜¯æ­£ç¢ºçš„ã€‚

ä¾‹å¦‚ï¼šä»¥ä¸‹æ’ç¨‹å¤šå€‹ `setState`ï¼ŒReact æœƒåˆ°æœ€å¾Œæ‰æŒ‰ç…§æ’ç¨‹é †åºåŸ·è¡Œç‹€æ…‹æ”¹è®Šï¼Œçµæœ State å°±æœƒå¾—åˆ° Bookã€‚

```jsx
const [state, setState] = useState('DVD');

setState('Pencil');
setState('Book'); // æœ€å¾Œçš„ç‹€æ…‹æœƒè®Šæˆ Book
```

### å–å¾—ç‹€æ…‹å¿«ç…§

ç„¶è€Œï¼Œæœ‰æ™‚å€™æˆ‘å€‘éœ€è¦é¦¬ä¸Šå–å¾—æ”¹è®Šçš„çµæœï¼Œæ–¹ä¾¿å»åšä¸€äº›æ‡‰ç”¨æˆ–è¨ˆç®—ã€‚é€™æ™‚å€™æˆ‘å€‘å¯ä»¥é€éã€Œå‡½å¼ã€çš„å½¢å¼ï¼Œè®“ç‹€æ…‹æ›´æ–°å¯ä»¥ä¾è³´æ–¼ä¹‹å‰çš„ç‹€æ…‹å¿«ç…§ (Snapshot)ã€‚

é€™æ¨£æˆ‘å€‘å°±èƒ½å¾—åˆ°åŸºæ–¼ç‹€æ…‹å¿«ç…§ (Snapshot) çš„æ–°ç‹€æ…‹ï¼Œè€Œä¸æ˜¯æ°¸é éƒ½åªæœƒæ‹¿åˆ°æœ€æ–°çš„é‚£ä¸€å€‹ç‹€æ…‹å“©ï¼

```jsx
// ğŸ‘‡ Updating State That Depends On The Previous State.
// Safer way: Ensure the Latest state snapshot (If it depends on the previous state)

setUserInput((prevState) => {
  return { ...prevState, enteredTitle: event.target.value };
});
```

é™¤äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨ `useEffect`ï¼Œå®ƒè·Ÿå‡½å¼å½¢å¼ä¸€æ¨£éƒ½æœƒå»çœ‹ä¾è³´çš„ç‹€æ…‹æœ‰æ²’æœ‰æ”¹è®Šï¼Œå¦‚æœæ”¹è®Šäº†å°±æœƒé¦¬ä¸ŠåŸ·è¡Œ `setState`ï¼Œå› è€Œä¸æœƒéŒ¯éç‹€æ…‹æ”¹è®Šï¼Œèƒ½å¤ ç¢ºä¿å–å¾—æœ€æ–°çš„ç‹€æ…‹ã€‚

å› æ­¤ï¼Œåœ¨ `useEffect` è£¡ä½¿ç”¨çš„ `setState` çš„è©±ï¼Œå³ä½¿ä¸æ˜¯å‡½å¼çš„å½¢å¼ï¼Œä¹Ÿæœƒå³æ™‚æ›´æ–°ç‹€æ…‹å–”ï¼

## Lifting The State Up

> è§€å¿µè¿‘ä¼¼ Vue çš„ Emit (From Child to Parent)

ç•¶ Parent component éœ€è¦å–å¾—ç”± Child component ç”Ÿæˆçš„ data æ™‚ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ Lifting The State Up çš„æŠ€å·§ã€‚

Step 1: åœ¨ Parent component å»ºç«‹ä¸€å€‹å‡½å¼ï¼Œå°‡å®ƒä½œç‚º Child component çš„ Props (`onXxx`) çš„ Valueã€‚

```jsx
// Inside of the "ParentComponent" component function

const xxxHandler = () => {
  // do something...
};

// Return JSX
<ChildComponent onXXX={xxxHandler} />;
```

Step 2: åœ¨ Child component åŸ·è¡Œå‡½å¼ `props.onXxx` ç­‰åŒæ–¼åŸ·è¡Œäº† Parent component çš„ `xxxHandler` å‡½å¼ï¼Œå› ç‚ºå‡½å¼å‚³éçš„æ˜¯ **Pointer (By Reference)**ã€‚

```jsx
// Inside of the "ChildComponent" component function

props.onXxx();
```

Step 3: å¾ Child component æ”¾å…¥åƒæ•¸å‚³å› Parent componentï¼Œè®“ Parent component å¯ä»¥å¾åƒæ•¸ç²å¾— Child component çš„ dataï¼Œé€™æ¨£å°±å®Œæˆ Lifting The State Up (Emit) çš„å‹•ä½œäº†ã€‚

```jsx
// Inside of the "ChildComponent" component function

const childData = {
  title: 'Child Title',
  data: new Date(),
};

props.onXxx(childData);
```

```jsx
// Inside of the "ParentComponent" component function

const xxxHandler = (enteredChildData) => {
  // do something...
  const childData = { ...enteredChildData };
  console.log(childData);
};

// Return JSX
<ChildComponent onXXX={xxxHandler} />;
```

## å›é¡§

çœ‹å®Œé€™ç¯‡æ–‡ç« ï¼Œæˆ‘å€‘åˆ°åº•æœ‰ä»€éº¼æ”¶ç©«å‘¢ï¼Ÿè—‰ç”±æœ¬æ–‡å¯ä»¥ç†è§£åˆ°â€¦

- useState Hook
- Lifting The State Up

## References

- [React - The Complete Guide (incl Hooks, React Router, Redux)](https://www.udemy.com/course/react-the-complete-guide-incl-redux/)
